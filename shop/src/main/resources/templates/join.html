<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<link rel="stylesheet" type="text/css" href="/css/join.css">
	<script type="text/javascript" src="/js/check.js"></script>
	<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<th:block th:insert="~{${menuBar} :: barCSS}"></th:block>
</head>

<body>
	<div th:insert="~{${menuBar} :: Bar}"></div><br>
	<form th:action="@{/join}" method="post"
	 enctype="multipart/form-data" name="joinForm" id="joinForm" onsubmit="return joinCheck();">
		<h1>회원가입</h1>
		<input name="shop_id" maxlength="15" autocomplete="off" placeholder="ID"><p></p>
		<input name="shop_pw" type="password" maxlength="20" autocomplete="off" placeholder="Pw"><p></p>
		<input name="shop_pwCheck" type="password" maxlength="20" autocomplete="off" placeholder="PwCheck"><p></p>
		<input name="shop_email" maxlength="10" autocomplete="off" placeholder="email">
		<input id="sendCode" value="전송" readonly></<p></p>
		<input id="shop_emailCode" name="shop_emailCode" maxlength="10" autocomplete="off" placeholder="emailCode">
		<input id="validCheck" value="확인" readonly><p></p>
		<input name="shop_address1" id="shop_address1" placeholder="postNum" readonly><p></p> 
		<input name="shop_address2" placeholder="address" readonly> <p></p>
		<input name="shop_address3" placeholder="detailAdress"><p></p>
		<button style="border:none;">회원가입</button>
	</form>
	
<script>
	joinCheck();
	const btn = document.querySelector("#shop_address1");
	btn.addEventListener("click", ()=>{
		new daum.Postcode({
        oncomplete: function(data) {
			console.log(data);
			let addr='';
			if(data.userSelectedType =='R'){
				addr = data.roadAddress;
			}else{
				addr = data.jibunAddress;
			}
			document.joinForm.shop_address1.value = data.zonecode;
			document.joinForm.shop_address2.value = addr;
        }
    }).open();
	})
	
	const mailSend= document.querySelector("#sendCode");
	mailSend.addEventListener("click", ()=>{
		const email = document.joinForm.shop_email.value;
		axios.post('', {email}).then((response)=>{
			if(response.status==200){
				alert("전송성공");
			} else{
				alert("error");
			}
		});
	});
	
	const codeCheck = document.querySelector("#validCheck");
	codeCheck.addEventListener("click", ()=>{
		const code = document.joinForm.shop_emailCode.value;
		axios.post('', {code}).then((response)=>{
			if(response.data){
				alert("검증성공");
			}else{
				alert("검증실패");
			}
		})
		
	})
	
	
</script>

</body>

</html>